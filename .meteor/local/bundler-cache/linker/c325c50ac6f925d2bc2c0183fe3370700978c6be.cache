[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                               //\n// packages/phund_angularjs-dropdown-multiselect/src/angularjs-dropdown-multiselect.js                           //\n//                                                                                                               //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                 //\n'use strict';                                                                                                    // 1\n                                                                                                                 // 2\nvar directiveModule = angular.module('angularjs-dropdown-multiselect', []);                                      // 3\n                                                                                                                 // 4\ndirectiveModule.directive('ngDropdownMultiselect', ['$filter', '$document', '$compile', '$parse',                // 5\n    function ($filter, $document, $compile, $parse) {                                                            // 6\n                                                                                                                 // 7\n        return {                                                                                                 // 8\n            restrict: 'AE',                                                                                      // 9\n            scope: {                                                                                             // 10\n                selectedModel: '=',                                                                              // 11\n                options: '=',                                                                                    // 12\n                extraSettings: '=',                                                                              // 13\n                events: '=',                                                                                     // 14\n                searchFilter: '=?',                                                                              // 15\n                translationTexts: '=',                                                                           // 16\n                groupBy: '@'                                                                                     // 17\n            },                                                                                                   // 18\n            template: function (element, attrs) {                                                                // 19\n                var checkboxes = attrs.checkboxes ? true : false;                                                // 20\n                var groups = attrs.groupBy ? true : false;                                                       // 21\n                                                                                                                 // 22\n                var template = '<div class=\"multiselect-parent btn-group dropdown-multiselect\">';                // 23\n                template += '<button type=\"button\" class=\"dropdown-toggle\" ng-class=\"settings.buttonClasses\" ng-click=\"toggleDropdown()\">{{getButtonText()}}&nbsp;<span class=\"caret\"></span></button>';\n                template += '<ul class=\"dropdown-menu dropdown-menu-form\" ng-style=\"{display: open ? \\'block\\' : \\'none\\', height : settings.scrollable ? settings.scrollableHeight : \\'auto\\' }\" style=\"overflow: scroll\" >';\n                template += '<li ng-hide=\"!settings.showCheckAll || settings.selectionLimit > 0\"><a data-ng-click=\"selectAll()\"><span class=\"glyphicon glyphicon-ok\"></span>  {{texts.checkAll}}</a>';\n                template += '<li ng-show=\"settings.showUncheckAll\"><a data-ng-click=\"deselectAll();\"><span class=\"glyphicon glyphicon-remove\"></span>   {{texts.uncheckAll}}</a></li>';\n                template += '<li ng-hide=\"(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll\" class=\"divider\"></li>';\n                template += '<li ng-show=\"settings.enableSearch\"><div class=\"dropdown-header\"><input type=\"text\" class=\"form-control\" style=\"width: 100%;\" ng-model=\"searchFilter\" placeholder=\"{{texts.searchPlaceholder}}\" /></li>';\n                template += '<li ng-show=\"settings.enableSearch\" class=\"divider\"></li>';                         // 30\n                                                                                                                 // 31\n                if (groups) {                                                                                    // 32\n                    template += '<li ng-repeat-start=\"option in orderedItems | filter: searchFilter\" ng-show=\"getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)\" role=\"presentation\" class=\"dropdown-header\">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}</li>';\n                    template += '<li ng-repeat-end role=\"presentation\">';                                        // 34\n                } else {                                                                                         // 35\n                    template += '<li role=\"presentation\" ng-repeat=\"option in options | filter: searchFilter\">';\n                }                                                                                                // 37\n                                                                                                                 // 38\n                template += '<a role=\"menuitem\" tabindex=\"-1\" ng-click=\"setSelectedItem(getPropertyForObject(option,settings.idProp))\">';\n                                                                                                                 // 40\n                if (checkboxes) {                                                                                // 41\n                    template += '<div class=\"checkbox\"><label><input class=\"checkboxInput\" type=\"checkbox\" ng-click=\"checkboxClick($event, getPropertyForObject(option,settings.idProp))\" ng-checked=\"isChecked(getPropertyForObject(option,settings.idProp))\" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div></a>';\n                } else {                                                                                         // 43\n                    template += '<span data-ng-class=\"{\\'glyphicon glyphicon-ok\\': isChecked(getPropertyForObject(option,settings.idProp))}\"></span> {{getPropertyForObject(option, settings.displayProp)}}</a>';\n                }                                                                                                // 45\n                                                                                                                 // 46\n                template += '</li>';                                                                             // 47\n                                                                                                                 // 48\n                template += '<li class=\"divider\" ng-show=\"settings.selectionLimit > 1\"></li>';                   // 49\n                template += '<li role=\"presentation\" ng-show=\"settings.selectionLimit > 1\"><a role=\"menuitem\">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li>';\n                                                                                                                 // 51\n                template += '</ul>';                                                                             // 52\n                template += '</div>';                                                                            // 53\n                                                                                                                 // 54\n                element.html(template);                                                                          // 55\n            },                                                                                                   // 56\n            link: function ($scope, $element, $attrs) {                                                          // 57\n                var $dropdownTrigger = $element.children()[0];                                                   // 58\n                                                                                                                 // 59\n                $scope.toggleDropdown = function () {                                                            // 60\n                    $scope.open = !$scope.open;                                                                  // 61\n                };                                                                                               // 62\n                                                                                                                 // 63\n                $scope.checkboxClick = function ($event, id) {                                                   // 64\n                    $scope.setSelectedItem(id);                                                                  // 65\n                    $event.stopImmediatePropagation();                                                           // 66\n                };                                                                                               // 67\n                                                                                                                 // 68\n                $scope.externalEvents = {                                                                        // 69\n                    onItemSelect: angular.noop,                                                                  // 70\n                    onItemDeselect: angular.noop,                                                                // 71\n                    onSelectAll: angular.noop,                                                                   // 72\n                    onDeselectAll: angular.noop,                                                                 // 73\n                    onInitDone: angular.noop,                                                                    // 74\n                    onMaxSelectionReached: angular.noop                                                          // 75\n                };                                                                                               // 76\n                                                                                                                 // 77\n                $scope.settings = {                                                                              // 78\n                    dynamicTitle: true,                                                                          // 79\n                    scrollable: false,                                                                           // 80\n                    scrollableHeight: '300px',                                                                   // 81\n                    closeOnBlur: true,                                                                           // 82\n                    displayProp: 'label',                                                                        // 83\n                    idProp: 'id',                                                                                // 84\n                    externalIdProp: 'id',                                                                        // 85\n                    enableSearch: false,                                                                         // 86\n                    selectionLimit: 0,                                                                           // 87\n                    showCheckAll: true,                                                                          // 88\n                    showUncheckAll: true,                                                                        // 89\n                    closeOnSelect: false,                                                                        // 90\n                    buttonClasses: 'btn btn-default',                                                            // 91\n                    closeOnDeselect: false,                                                                      // 92\n                    groupBy: $attrs.groupBy || undefined,                                                        // 93\n                    groupByTextProvider: null,                                                                   // 94\n                    smartButtonMaxItems: 0,                                                                      // 95\n                    smartButtonTextConverter: angular.noop                                                       // 96\n                };                                                                                               // 97\n                                                                                                                 // 98\n                $scope.texts = {                                                                                 // 99\n                    checkAll: 'Check All',                                                                       // 100\n                    uncheckAll: 'Uncheck All',                                                                   // 101\n                    selectionCount: 'checked',                                                                   // 102\n                    selectionOf: '/',                                                                            // 103\n                    searchPlaceholder: 'Search...',                                                              // 104\n                    buttonDefaultText: 'Select',                                                                 // 105\n                    dynamicButtonTextSuffix: 'checked'                                                           // 106\n                };                                                                                               // 107\n                                                                                                                 // 108\n                $scope.searchFilter = $scope.searchFilter || '';                                                 // 109\n                                                                                                                 // 110\n                if (angular.isDefined($scope.settings.groupBy)) {                                                // 111\n                    $scope.$watch('options', function (newValue) {                                               // 112\n                        if (angular.isDefined(newValue)) {                                                       // 113\n                            $scope.orderedItems = $filter('orderBy')(newValue, $scope.settings.groupBy);         // 114\n                        }                                                                                        // 115\n                    });                                                                                          // 116\n                }                                                                                                // 117\n                                                                                                                 // 118\n                angular.extend($scope.settings, $scope.extraSettings || []);                                     // 119\n                angular.extend($scope.externalEvents, $scope.events || []);                                      // 120\n                angular.extend($scope.texts, $scope.translationTexts);                                           // 121\n                                                                                                                 // 122\n                $scope.singleSelection = $scope.settings.selectionLimit === 1;                                   // 123\n                                                                                                                 // 124\n                function getFindObj(id) {                                                                        // 125\n                    var findObj = {};                                                                            // 126\n                                                                                                                 // 127\n                    if ($scope.settings.externalIdProp === '') {                                                 // 128\n                        findObj[$scope.settings.idProp] = id;                                                    // 129\n                    } else {                                                                                     // 130\n                        findObj[$scope.settings.externalIdProp] = id;                                            // 131\n                    }                                                                                            // 132\n                                                                                                                 // 133\n                    return findObj;                                                                              // 134\n                }                                                                                                // 135\n                                                                                                                 // 136\n                function clearObject(object) {                                                                   // 137\n                    for (var prop in object) {                                                                   // 138\n                        delete object[prop];                                                                     // 139\n                    }                                                                                            // 140\n                }                                                                                                // 141\n                                                                                                                 // 142\n                if ($scope.singleSelection) {                                                                    // 143\n                    if (angular.isArray($scope.selectedModel) && $scope.selectedModel.length === 0) {            // 144\n                        clearObject($scope.selectedModel);                                                       // 145\n                    }                                                                                            // 146\n                }                                                                                                // 147\n                                                                                                                 // 148\n                if ($scope.settings.closeOnBlur) {                                                               // 149\n                    $document.on('click', function (e) {                                                         // 150\n                        var target = e.target.parentElement;                                                     // 151\n                        var parentFound = false;                                                                 // 152\n                                                                                                                 // 153\n                        while (angular.isDefined(target) && target !== null && !parentFound) {                   // 154\n                            if (_.contains(target.className.split(' '), 'multiselect-parent') && !parentFound) {\n                                if(target === $dropdownTrigger) {                                                // 156\n                                    parentFound = true;                                                          // 157\n                                }                                                                                // 158\n                            }                                                                                    // 159\n                            target = target.parentElement;                                                       // 160\n                        }                                                                                        // 161\n                                                                                                                 // 162\n                        if (!parentFound) {                                                                      // 163\n                            $scope.$apply(function () {                                                          // 164\n                                $scope.open = false;                                                             // 165\n                            });                                                                                  // 166\n                        }                                                                                        // 167\n                    });                                                                                          // 168\n                }                                                                                                // 169\n                                                                                                                 // 170\n                $scope.getGroupTitle = function (groupValue) {                                                   // 171\n                    if ($scope.settings.groupByTextProvider !== null) {                                          // 172\n                        return $scope.settings.groupByTextProvider(groupValue);                                  // 173\n                    }                                                                                            // 174\n                                                                                                                 // 175\n                    return groupValue;                                                                           // 176\n                };                                                                                               // 177\n                                                                                                                 // 178\n                $scope.getButtonText = function () {                                                             // 179\n                    if ($scope.settings.dynamicTitle && ($scope.selectedModel.length > 0 || (angular.isObject($scope.selectedModel) && _.keys($scope.selectedModel).length > 0))) {\n                        if ($scope.settings.smartButtonMaxItems > 0) {                                           // 181\n                            var itemsText = [];                                                                  // 182\n                                                                                                                 // 183\n                            angular.forEach($scope.options, function (optionItem) {                              // 184\n                                if ($scope.isChecked($scope.getPropertyForObject(optionItem, $scope.settings.idProp))) {\n                                    var displayText = $scope.getPropertyForObject(optionItem, $scope.settings.displayProp);\n                                    var converterResponse = $scope.settings.smartButtonTextConverter(displayText, optionItem);\n                                                                                                                 // 188\n                                    itemsText.push(converterResponse ? converterResponse : displayText);         // 189\n                                }                                                                                // 190\n                            });                                                                                  // 191\n                                                                                                                 // 192\n                            if ($scope.selectedModel.length > $scope.settings.smartButtonMaxItems) {             // 193\n                                itemsText = itemsText.slice(0, $scope.settings.smartButtonMaxItems);             // 194\n                                itemsText.push('...');                                                           // 195\n                            }                                                                                    // 196\n                                                                                                                 // 197\n                            return itemsText.join(', ');                                                         // 198\n                        } else {                                                                                 // 199\n                            var totalSelected;                                                                   // 200\n                                                                                                                 // 201\n                            if ($scope.singleSelection) {                                                        // 202\n                                totalSelected = ($scope.selectedModel !== null && angular.isDefined($scope.selectedModel[$scope.settings.idProp])) ? 1 : 0;\n                            } else {                                                                             // 204\n                                totalSelected = angular.isDefined($scope.selectedModel) ? $scope.selectedModel.length : 0;\n                            }                                                                                    // 206\n                                                                                                                 // 207\n                            if (totalSelected === 0) {                                                           // 208\n                                return $scope.texts.buttonDefaultText;                                           // 209\n                            } else {                                                                             // 210\n                                return totalSelected + ' ' + $scope.texts.dynamicButtonTextSuffix;               // 211\n                            }                                                                                    // 212\n                        }                                                                                        // 213\n                    } else {                                                                                     // 214\n                        return $scope.texts.buttonDefaultText;                                                   // 215\n                    }                                                                                            // 216\n                };                                                                                               // 217\n                                                                                                                 // 218\n                $scope.getPropertyForObject = function (object, property) {                                      // 219\n                    if (angular.isDefined(object) && object.hasOwnProperty(property)) {                          // 220\n                        return object[property];                                                                 // 221\n                    }                                                                                            // 222\n                                                                                                                 // 223\n                    return '';                                                                                   // 224\n                };                                                                                               // 225\n                                                                                                                 // 226\n                $scope.selectAll = function () {                                                                 // 227\n                    $scope.deselectAll(false);                                                                   // 228\n                    $scope.externalEvents.onSelectAll();                                                         // 229\n                                                                                                                 // 230\n                    angular.forEach($scope.options, function (value) {                                           // 231\n                        $scope.setSelectedItem(value[$scope.settings.idProp], true);                             // 232\n                    });                                                                                          // 233\n                };                                                                                               // 234\n                                                                                                                 // 235\n                $scope.deselectAll = function (sendEvent) {                                                      // 236\n                    sendEvent = sendEvent || true;                                                               // 237\n                                                                                                                 // 238\n                    if (sendEvent) {                                                                             // 239\n                        $scope.externalEvents.onDeselectAll();                                                   // 240\n                    }                                                                                            // 241\n                                                                                                                 // 242\n                    if ($scope.singleSelection) {                                                                // 243\n                        clearObject($scope.selectedModel);                                                       // 244\n                    } else {                                                                                     // 245\n                        $scope.selectedModel.splice(0, $scope.selectedModel.length);                             // 246\n                    }                                                                                            // 247\n                };                                                                                               // 248\n                                                                                                                 // 249\n                $scope.setSelectedItem = function (id, dontRemove) {                                             // 250\n                    var findObj = getFindObj(id);                                                                // 251\n                    var finalObj = null;                                                                         // 252\n                                                                                                                 // 253\n                    if ($scope.settings.externalIdProp === '') {                                                 // 254\n                        finalObj = _.find($scope.options, findObj);                                              // 255\n                    } else {                                                                                     // 256\n                        finalObj = findObj;                                                                      // 257\n                    }                                                                                            // 258\n                                                                                                                 // 259\n                    if ($scope.singleSelection) {                                                                // 260\n                        clearObject($scope.selectedModel);                                                       // 261\n                        angular.extend($scope.selectedModel, finalObj);                                          // 262\n                        $scope.externalEvents.onItemSelect(finalObj);                                            // 263\n                        if ($scope.settings.closeOnSelect) $scope.open = false;                                  // 264\n                                                                                                                 // 265\n                        return;                                                                                  // 266\n                    }                                                                                            // 267\n                                                                                                                 // 268\n                    dontRemove = dontRemove || false;                                                            // 269\n                                                                                                                 // 270\n                    var exists = _.findIndex($scope.selectedModel, findObj) !== -1;                              // 271\n                                                                                                                 // 272\n                    if (!dontRemove && exists) {                                                                 // 273\n                        $scope.selectedModel.splice(_.findIndex($scope.selectedModel, findObj), 1);              // 274\n                        $scope.externalEvents.onItemDeselect(findObj);                                           // 275\n                    } else if (!exists && ($scope.settings.selectionLimit === 0 || $scope.selectedModel.length < $scope.settings.selectionLimit)) {\n                        $scope.selectedModel.push(finalObj);                                                     // 277\n                        $scope.externalEvents.onItemSelect(finalObj);                                            // 278\n                    }                                                                                            // 279\n                    if ($scope.settings.closeOnSelect) $scope.open = false;                                      // 280\n                };                                                                                               // 281\n                                                                                                                 // 282\n                $scope.isChecked = function (id) {                                                               // 283\n                    if ($scope.singleSelection) {                                                                // 284\n                        return $scope.selectedModel !== null && angular.isDefined($scope.selectedModel[$scope.settings.idProp]) && $scope.selectedModel[$scope.settings.idProp] === getFindObj(id)[$scope.settings.idProp];\n                    }                                                                                            // 286\n                                                                                                                 // 287\n                    return _.findIndex($scope.selectedModel, getFindObj(id)) !== -1;                             // 288\n                };                                                                                               // 289\n                                                                                                                 // 290\n                $scope.externalEvents.onInitDone();                                                              // 291\n            }                                                                                                    // 292\n        };                                                                                                       // 293\n}]);                                                                                                             // 294\n                                                                                                                 // 295\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['phund:angularjs-dropdown-multiselect'] = {};\n\n})();\n","servePath":"/packages/phund_angularjs-dropdown-multiselect.js"}]