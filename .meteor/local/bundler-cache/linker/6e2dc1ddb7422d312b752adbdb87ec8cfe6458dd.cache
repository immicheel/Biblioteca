[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRoles = Package['alanning:roles'].Roles;\nmoment = Package['momentjs:moment'].moment;\nMeteorCamera = Package['mdg:camera'].MeteorCamera;\nCounts = Package['tmeasday:publish-counts'].Counts;\npublishCount = Package['tmeasday:publish-counts'].publishCount;\nXLSX = Package['huaming:js-xlsx'].XLSX;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nmain = Package.webapp.main;\nWebAppInternals = Package.webapp.WebAppInternals;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"server\":{\"initializers\":{\"db.initializer.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/initializers/db.initializer.js                                                                      //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\n                                                                                                              //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"users.initializer.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/initializers/users.initializer.js                                                                   //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.startup(function () {                                                                                  // 1\n  if (Meteor.users.find().count() === 0) {                                                                    // 2\n    var usuario_id = Accounts.createUser({                                                                    // 3\n      username: 'admin',                                                                                      // 4\n      password: '123qwe',                                                                                     // 5\n      profile: {                                                                                              // 6\n        nombre: 'Super Administrador'                                                                         // 7\n      }                                                                                                       //\n    });                                                                                                       //\n                                                                                                              //\n    Roles.addUsersToRoles(usuario_id, 'sAdmin');                                                              // 11\n                                                                                                              //\n    var adminInicial = Accounts.createUser({                                                                  // 13\n      username: 'admin1',                                                                                     // 14\n      password: '123qwe',                                                                                     // 15\n      profile: {                                                                                              // 16\n        nombre: 'Administrador General'                                                                       // 17\n      }                                                                                                       //\n    });                                                                                                       //\n    Roles.addUsersToRoles(adminInicial, 'admin');                                                             // 20\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"methods\":{\"getArchivo.js\":[\"docxtemplater\",\"jszip\",\"better-unoconv\",\"fibers/future\",\"fs\",\"path\",function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/methods/getArchivo.js                                                                               //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.methods({                                                                                              // 1\n                                                                                                              //\n  report: function report(params) {                                                                           // 3\n    var Docxtemplater = require('docxtemplater');                                                             // 4\n    var JSZip = require('jszip');                                                                             // 5\n    var unoconv = require('better-unoconv');                                                                  // 6\n    var future = require('fibers/future');                                                                    // 7\n    var fs = require('fs');                                                                                   // 8\n    var objParse = function objParse(datos, obj, prof) {                                                      // 9\n      if (!obj) {                                                                                             // 10\n        obj = {};                                                                                             // 11\n      }                                                                                                       //\n      _.each(datos, function (d, dd) {                                                                        // 13\n        var i = prof ? prof + dd : dd;                                                                        // 14\n        if (_.isDate(d)) {                                                                                    // 15\n          obj[i] = moment(d).format('DD-MM-YYYY');                                                            // 16\n        } else if (_.isArray(d)) {                                                                            //\n          obj[i] = arrParse(d, []);                                                                           // 18\n        } else if (_.isObject(d)) {                                                                           //\n          objParse(d, obj, i + '.');                                                                          // 20\n        } else {                                                                                              //\n          obj[i] = d;                                                                                         // 22\n        }                                                                                                     //\n      });                                                                                                     //\n      return obj;                                                                                             // 25\n    };                                                                                                        //\n                                                                                                              //\n    var arrParse = function arrParse(datos, arr) {                                                            // 28\n      _.each(datos, function (d) {                                                                            // 29\n        if (_.isArray(d)) {                                                                                   // 30\n          arr.push(arrParse(d, []));                                                                          // 31\n        } else if (_.isObject(d)) {                                                                           //\n          var obj = objParse(d, {});                                                                          // 33\n          arr.push(obj);                                                                                      // 34\n        } else {                                                                                              //\n          arr.push(!_.isDate(d) ? d : moment(d).format('DD-MM-YYYY'));                                        // 36\n        }                                                                                                     //\n      });                                                                                                     //\n      return arr;                                                                                             // 39\n    };                                                                                                        //\n                                                                                                              //\n    params.datos = objParse(params.datos);                                                                    // 42\n    params.datos.fechaReporte = moment().format('DD-MM-YYYY');                                                // 43\n    var templateType = params.type === 'pdf' ? '.docx' : params.type === 'excel' ? '.xlsx' : '.docx';         // 44\n    if (Meteor.isDevelopment) {                                                                               // 45\n      var path = require('path');                                                                             // 46\n      var publicPath = path.resolve('.').split('.meteor')[0];                                                 // 47\n      var templateRoute = publicPath + \"public/templates/\" + params.templateNombre + templateType;            // 48\n    } else {                                                                                                  //\n      var publicPath = '/home/casserole/bundle/programs/web.browser/app/';                                    // 50\n      var templateRoute = publicPath + \"templates/\" + params.templateNombre + templateType;                   // 51\n    }                                                                                                         //\n                                                                                                              //\n    var content = fs.readFileSync(templateRoute, \"binary\");                                                   // 54\n    var res = new future();                                                                                   // 55\n    var zip = new JSZip(content);                                                                             // 56\n    var doc = new Docxtemplater().loadZip(zip).setOptions({                                                   // 57\n      nullGetter: function nullGetter(part) {                                                                 // 58\n        if (!part.module) {                                                                                   // 59\n          return \"\";                                                                                          // 60\n        }                                                                                                     //\n        if (part.module === \"rawxml\") {                                                                       // 62\n          return \"\";                                                                                          // 63\n        }                                                                                                     //\n        return \"\";                                                                                            // 65\n      }                                                                                                       //\n    });                                                                                                       //\n                                                                                                              //\n    doc.setData(params.datos);                                                                                // 69\n    doc.render();                                                                                             // 70\n    var buf = doc.getZip().generate({ type: \"nodebuffer\" });                                                  // 71\n    if (params.type == 'pdf') {                                                                               // 72\n      var rutaOutput = publicPath + (Meteor.isDevelopment ? \".outputs/\" : \"templates/\") + params.reportNombre + moment().format('x') + templateType;\n      fs.writeFileSync(rutaOutput, buf);                                                                      // 74\n      unoconv.convert(rutaOutput, 'pdf', function (err, result) {                                             // 75\n        if (!err) {                                                                                           // 76\n          fs.unlink(rutaOutput);                                                                              // 77\n          res['return']({ uri: 'data:application/pdf;base64,' + result.toString('base64'), nombre: params.reportNombre + '.pdf' });\n        } else {                                                                                              //\n          res['return']({ err: err });                                                                        // 80\n        }                                                                                                     //\n      });                                                                                                     //\n    } else {                                                                                                  //\n      var mime;                                                                                               // 84\n      if (templateType === '.xlsx') {                                                                         // 85\n        mime = 'vnd.openxmlformats-officedocument.spreadsheetml.sheet';                                       // 86\n      } else {                                                                                                //\n        mime = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';                     // 88\n      }                                                                                                       //\n      res['return']({ uri: 'data:application/' + mime + ';base64,' + buf.toString('base64'), nombre: params.reportNombre + templateType });\n    }                                                                                                         //\n    return res.wait();                                                                                        // 92\n  }                                                                                                           //\n                                                                                                              //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"getDatos.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/methods/getDatos.js                                                                                 //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.methods({                                                                                              // 1\n                                                                                                              //\n\tgetUnidad: function getUnidad(id) {                                                                          // 3\n\t\tvar objeto = Unidades.findOne({ _id: id });                                                                 // 4\n\t\treturn objeto;                                                                                              // 5\n\t}                                                                                                            //\n                                                                                                              //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"templates.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/methods/templates.js                                                                                //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nif (Meteor.isClient) {                                                                                        // 1\n    Template.script_template.onRendered(function () {                                                         // 2\n        $(document).ready(function () {                                                                       // 3\n            $('.js-example-basic-single').select2();                                                          // 4\n        });                                                                                                   //\n    });                                                                                                       //\n}                                                                                                             //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"usuariosMethods.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/methods/usuariosMethods.js                                                                          //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.methods({                                                                                              // 1\n\tcreateUsuario: function createUsuario(usuario, rol) {                                                        // 2\n\t\tvar usuario_id = Accounts.createUser({                                                                      // 3\n\t\t\tusername: usuario.username,                                                                                // 4\n\t\t\tpassword: usuario.password,                                                                                // 5\n\t\t\tprofile: usuario.profile                                                                                   // 6\n\t\t});                                                                                                         //\n                                                                                                              //\n\t\tRoles.addUsersToRoles(usuario_id, rol);                                                                     // 9\n\t\treturn usuario_id;                                                                                          // 10\n\t},                                                                                                           //\n\tuserIsInRole: function userIsInRole(usuario, rol, grupo, vista) {                                            // 12\n\t\tif (!Roles.userIsInRole(usuario, rol, grupo)) {                                                             // 13\n\t\t\tthrow new Meteor.Error(403, \"Usted no tiene permiso para entrar a \" + vista);                              // 14\n\t\t}                                                                                                           //\n\t},                                                                                                           //\n\tupdateUsuario: function updateUsuario(usuario, rol) {                                                        // 17\n\t\tvar user = Meteor.users.findOne({ \"username\": usuario.username });                                          // 18\n\t\tMeteor.users.update({ _id: user._id }, { $set: {                                                            // 19\n\t\t\t\tusername: usuario.username,                                                                               // 20\n\t\t\t\troles: [rol],                                                                                             // 21\n\t\t\t\tprofile: usuario.profile                                                                                  // 22\n\t\t\t} });                                                                                                      //\n\t\tif (usuario.password != undefined) {                                                                        // 24\n\t\t\tAccounts.setPassword(user._id, usuario.password, { logout: false });                                       // 25\n\t\t}                                                                                                           //\n\t}                                                                                                            //\n                                                                                                              //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"startup\":{\"loadModels.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/startup/loadModels.js                                                                               //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.startup(function () {});                                                                               // 1\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"alumnosPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/alumnosPublish.js                                                                                   //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"alumnos\", function (params) {                                                                 // 1\n    return Alumnos.find();                                                                                    // 2\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish(\"buscarAlumnos\", function (options) {                                                          // 5\n    if (options != undefined) {                                                                               // 6\n        var selector = {                                                                                      // 7\n            \"NombreCompleto\": { '$regex': '.*' + options.where.nombreCompleto || '' + '.*', '$options': 'i' }\n        };                                                                                                    //\n        return Alumnos.find(selector, options.options);                                                       // 11\n    }                                                                                                         //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"departamentosPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/departamentosPublish.js                                                                             //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"departamentos\", function (params) {                                                           // 1\n    return Departamentos.find(params);                                                                        // 2\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"librosPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/librosPublish.js                                                                                    //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"libros\", function (params) {                                                                  // 1\n  return Libros.find(params);                                                                                 // 2\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish(\"listaLibros\", function () {                                                                   // 5\n  return Libros.find();                                                                                       // 6\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"maestrosPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/maestrosPublish.js                                                                                  //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"maestros\", function (params) {                                                                // 1\n    return Maestros.find();                                                                                   // 2\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish(\"buscarMaestros\", function (options) {                                                         // 5\n    if (options != undefined) {                                                                               // 6\n        var selector = {                                                                                      // 7\n            \"NombreCompleto\": { '$regex': '.*' + options.where.nombreCompleto || '' + '.*', '$options': 'i' }\n        };                                                                                                    //\n        return Maestros.find(selector, options.options);                                                      // 11\n    }                                                                                                         //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"materiasPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/materiasPublish.js                                                                                  //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"materias\", function (params) {                                                                // 1\n  return Materias.find(params);                                                                               // 2\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish(\"listaMaterias\", function () {                                                                 // 5\n  return Materias.find();                                                                                     // 6\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"planEstudioPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/planEstudioPublish.js                                                                               //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"planesEstudio\", function (params) {                                                           // 1\n    return PlanesEstudio.find(params);                                                                        // 2\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"programasEducativos.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/programasEducativos.js                                                                              //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"programasEducativos\", function (params) {                                                     // 1\n    return ProgramasEducativos.find(params);                                                                  // 2\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"unidadesPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/unidadesPublish.js                                                                                  //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"unidades\", function (params) {                                                                // 1\n    return Unidades.find(params);                                                                             // 2\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"usuariosPublish.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// server/usuariosPublish.js                                                                                  //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMeteor.publish(\"usuarios\", function (params) {                                                                // 1\n  return Meteor.users.find(params);                                                                           // 2\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('usuariosCatalogo', function () {                                                              // 5\n  return Roles.getUsersInRole('Maestro');                                                                     // 6\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaUsuarios', function () {                                                                 // 9\n  return Meteor.users.find({ \"roles\": \"Maestro\" });                                                           // 10\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaCoordinadores', function () {                                                            // 13\n  return Meteor.users.find({ \"roles\": \"Coordinador\" });                                                       // 14\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaAdministradores', function () {                                                          // 17\n  return Meteor.users.find({ \"roles\": \"Administrador\" });                                                     // 18\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaAdministradoresPorUnidad', function (params) {                                           // 21\n  return Meteor.users.find(params);                                                                           // 22\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaMaestrosPorUnidad', function (params) {                                                  // 26\n  return Meteor.users.find(params);                                                                           // 27\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish(\"buscarUsuarios\", function (options) {                                                         // 31\n  if (options != undefined) {                                                                                 // 32\n    var selector = {                                                                                          // 33\n      \"username\": { '$regex': '.*' + options.where.username || '' + '.*', '$options': 'i' }                   // 34\n    };                                                                                                        //\n    return Meteor.users.find(selector, options.options);                                                      // 37\n  }                                                                                                           //\n});                                                                                                           //\n                                                                                                              //\nMeteor.publish('listaCoordinadoresPorUnidad', function (params) {                                             // 41\n  return Meteor.users.find(params);                                                                           // 42\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"modelos\":{\"alumnos.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/alumnos.js                                                                                         //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nAlumnos = new Mongo.Collection(\"alumnos\");                                                                    // 1\nAlumnos.allow({                                                                                               // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"categorias.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/categorias.js                                                                                      //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\n                                                                                                              //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"departamentos.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/departamentos.js                                                                                   //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nDepartamentos = new Mongo.Collection(\"departamentos\");                                                        // 1\nDepartamentos.allow({                                                                                         // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"libros.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/libros.js                                                                                          //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nLibros = new Mongo.Collection(\"libros\");                                                                      // 1\nLibros.allow({                                                                                                // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"maestros.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/maestros.js                                                                                        //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMaestros = new Mongo.Collection(\"maestros\");                                                                  // 1\nMaestros.allow({                                                                                              // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"materias.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/materias.js                                                                                        //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nMaterias = new Mongo.Collection(\"materias\");                                                                  // 1\nMaterias.allow({                                                                                              // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"planEstudio.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/planEstudio.js                                                                                     //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nPlanesEstudio = new Mongo.Collection(\"planesdeEstudio\");                                                      // 1\nPlanesEstudio.allow({                                                                                         // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"programasEducativos.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/programasEducativos.js                                                                             //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nProgramasEducativos = new Mongo.Collection(\"programasEducativos\");                                            // 1\nProgramasEducativos.allow({                                                                                   // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"unidades.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// modelos/unidades.js                                                                                        //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\nUnidades = new Mongo.Collection(\"unidades\");                                                                  // 1\nUnidades.allow({                                                                                              // 2\n  insert: function insert() {                                                                                 // 3\n    return true;                                                                                              // 3\n  },                                                                                                          //\n  update: function update() {                                                                                 // 4\n    return true;                                                                                              // 4\n  },                                                                                                          //\n  remove: function remove() {                                                                                 // 5\n    return true;                                                                                              // 5\n  }                                                                                                           //\n});                                                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\"]});\nrequire(\"./server/initializers/db.initializer.js\");\nrequire(\"./server/initializers/users.initializer.js\");\nrequire(\"./server/methods/getArchivo.js\");\nrequire(\"./server/methods/getDatos.js\");\nrequire(\"./server/methods/templates.js\");\nrequire(\"./server/methods/usuariosMethods.js\");\nrequire(\"./server/startup/loadModels.js\");\nrequire(\"./modelos/alumnos.js\");\nrequire(\"./modelos/categorias.js\");\nrequire(\"./modelos/departamentos.js\");\nrequire(\"./modelos/libros.js\");\nrequire(\"./modelos/maestros.js\");\nrequire(\"./modelos/materias.js\");\nrequire(\"./modelos/planEstudio.js\");\nrequire(\"./modelos/programasEducativos.js\");\nrequire(\"./modelos/unidades.js\");\nrequire(\"./server/alumnosPublish.js\");\nrequire(\"./server/departamentosPublish.js\");\nrequire(\"./server/librosPublish.js\");\nrequire(\"./server/maestrosPublish.js\");\nrequire(\"./server/materiasPublish.js\");\nrequire(\"./server/planEstudioPublish.js\");\nrequire(\"./server/programasEducativos.js\");\nrequire(\"./server/unidadesPublish.js\");\nrequire(\"./server/usuariosPublish.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/server/initializers/users.initializer.js","/server/methods/getArchivo.js","/server/methods/getDatos.js","/server/methods/templates.js","/server/methods/usuariosMethods.js","/server/startup/loadModels.js","/server/alumnosPublish.js","/server/departamentosPublish.js","/server/librosPublish.js","/server/maestrosPublish.js","/server/materiasPublish.js","/server/planEstudioPublish.js","/server/programasEducativos.js","/server/unidadesPublish.js","/server/usuariosPublish.js","/modelos/alumnos.js","/modelos/departamentos.js","/modelos/libros.js","/modelos/maestros.js","/modelos/materias.js","/modelos/planEstudio.js","/modelos/programasEducativos.js","/modelos/unidades.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["Meteor.startup(function () {\n  if (Meteor.users.find().count() === 0) {\n    var usuario_id = Accounts.createUser({\n      username: 'admin',\n      password: '123qwe',\n      profile : {\n\t      nombre: 'Super Administrador',\n      }\n    });\n    \n    Roles.addUsersToRoles(usuario_id, 'sAdmin');\n\n    var adminInicial = Accounts.createUser({\n      username: 'admin1',\n      password: '123qwe',\n      profile : {\n        nombre: 'Administrador General',\n      }\n    });\n    Roles.addUsersToRoles(adminInicial, 'admin');\n  }\n});","Meteor.methods({\n\n\treport: function(params) {\n    var Docxtemplater = require('docxtemplater');\n    var JSZip = require('jszip');\n    var unoconv = require('better-unoconv');\n    var future = require('fibers/future');\n    var fs = require('fs');\n    var objParse = function(datos, obj, prof) {\n      if (!obj) {\n        obj = {};\n      }\n      _.each(datos, function(d, dd) {\n        var i = prof ? prof + dd : dd;\n        if (_.isDate(d)) {\n          obj[i] = moment(d).format('DD-MM-YYYY');\n        } else if (_.isArray(d)) {\n          obj[i] = arrParse(d, []);\n        } else if (_.isObject(d)) {\n          objParse(d, obj, i + '.');\n        } else {\n          obj[i] = d;\n        }\n      });\n      return obj\n    };\n\n    var arrParse = function(datos, arr) {\n      _.each(datos, function(d) {\n        if (_.isArray(d)){\n          arr.push(arrParse(d, []));\n        }else if (_.isObject(d)){\n          var obj = objParse(d, {});\n          arr.push(obj);\n        } else {\n          arr.push(!_.isDate(d) ? d : moment(d).format('DD-MM-YYYY'));\n        }\n      });\n      return arr\n    };\n\n    params.datos = objParse(params.datos);\n    params.datos.fechaReporte = moment().format('DD-MM-YYYY');  \n    var templateType = (params.type === 'pdf') ? '.docx' : (params.type === 'excel' ? '.xlsx' : '.docx');\n    if(Meteor.isDevelopment){\n      var path = require('path');\n      var publicPath = path.resolve('.').split('.meteor')[0];\n      var templateRoute = publicPath + \"public/templates/\" + params.templateNombre + templateType;\n    }else{\n      var publicPath = '/home/casserole/bundle/programs/web.browser/app/';\n      var templateRoute = publicPath + \"templates/\" + params.templateNombre + templateType;\n    }\n\n    var content = fs.readFileSync(templateRoute, \"binary\");\n    var res = new future();\n    var zip = new JSZip(content);\n    var doc = new Docxtemplater().loadZip(zip).setOptions({\n      nullGetter: function(part) {\n        if (!part.module) {\n          return \"\";\n        }\n        if (part.module === \"rawxml\") {\n          return \"\";\n        }\n        return \"\";\n      }\n    });\n\n    doc.setData(params.datos);\n    doc.render();\n    var buf = doc.getZip().generate({ type: \"nodebuffer\" });\n    if (params.type == 'pdf') {\n      var rutaOutput = publicPath + (Meteor.isDevelopment ? \".outputs/\" : \"templates/\") + params.reportNombre + moment().format('x') + templateType;\n      fs.writeFileSync(rutaOutput, buf);\n      unoconv.convert(rutaOutput, 'pdf', function(err, result) {\n        if(!err){\n          fs.unlink(rutaOutput);\n          res['return']({ uri: 'data:application/pdf;base64,' + result.toString('base64'), nombre: params.reportNombre + '.pdf' });\n        }else{\n          res['return']({err: err});\n        }\n      });\n    } else {\n      var mime;\n      if (templateType === '.xlsx') {\n        mime = 'vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n      } else {\n        mime = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n      }\n      res['return']({ uri: 'data:application/' + mime + ';base64,' + buf.toString('base64'), nombre: params.reportNombre + templateType });\n    }\n    return res.wait()\n  }\n\t\n\t\n});\t\t\t","Meteor.methods({\n\t\t\n\tgetUnidad: function (id) {\n\t  var objeto = Unidades.findOne({_id : id});\t \n\t\treturn objeto;\t\t\n\t},\n\t\n\n});\n","if(Meteor.isClient) {\n    Template.script_template.onRendered(function() {\n        $(document).ready(function() {\n            $('.js-example-basic-single').select2();\n        });\n    });\n}","Meteor.methods({\n  createUsuario: function (usuario, rol) {\n\t \t\t\tvar usuario_id = Accounts.createUser({\n\t\t\t\t\tusername: usuario.username,\n\t\t\t\t\tpassword: usuario.password,\t\t\t\n\t\t\t\t\tprofile: usuario.profile\n\t\t});\n\t\t\n\t\tRoles.addUsersToRoles(usuario_id, rol);\n\t\treturn usuario_id;\n\t},\n\tuserIsInRole: function(usuario, rol, grupo, vista){\n\t\tif (!Roles.userIsInRole(usuario, rol, grupo)) {\n\t    throw new Meteor.Error(403, \"Usted no tiene permiso para entrar a \" + vista);\n\t  }\n\t},\n\tupdateUsuario: function (usuario, rol) {\n\t  var user = Meteor.users.findOne({\"username\" : usuario.username});\n\t  Meteor.users.update({_id: user._id}, {$set:{\n\t\t\tusername: usuario.username,\n\t\t\troles: [rol],\n\t\t\tprofile: usuario.profile\n\t\t}});\n\t\tif(usuario.password != undefined) {\n\t\tAccounts.setPassword(user._id, usuario.password, {logout: false});\n\t\t}\n\t},\n\t\t\n  \n});","Meteor.startup(function() {   \n  \n  \n});","Meteor.publish(\"alumnos\",function(params){\n    return Alumnos.find();\n});\n\nMeteor.publish(\"buscarAlumnos\",function(options) {\n    if(options != undefined) {\n            let selector = {\n                \"NombreCompleto\" : { '$regex': '.*' + options.where.nombreCompleto\n            || '' + '.*', '$options': 'i' }\n            }\n            return Alumnos.find(selector, options.options)   \n    }\n});","Meteor.publish(\"departamentos\",function(params){\n    return Departamentos.find(params);\n});","Meteor.publish(\"libros\",function(params){\r\n    return Libros.find(params);\r\n});\r\n\r\nMeteor.publish(\"listaLibros\", () => {\r\n  return Libros.find();\r\n});","Meteor.publish(\"maestros\",function(params){\n    return Maestros.find();\n});\n\nMeteor.publish(\"buscarMaestros\",function(options) {\n    if(options != undefined) {\n            let selector = {\n                \"NombreCompleto\" : { '$regex': '.*' + options.where.nombreCompleto\n            || '' + '.*', '$options': 'i' }\n            }\n            return Maestros.find(selector, options.options)   \n    }\n});","Meteor.publish(\"materias\",function(params){\n  \treturn Materias.find(params);\n});\n\nMeteor.publish(\"listaMaterias\", () => {\n\treturn Materias.find();\n});","Meteor.publish(\"planesEstudio\",function(params){\n    return PlanesEstudio.find(params);\n});","Meteor.publish(\"programasEducativos\",function(params){\n    return ProgramasEducativos.find(params);\n});","Meteor.publish(\"unidades\",function(params){\n    return Unidades.find(params);\n});","Meteor.publish(\"usuarios\",function(params){\n    return Meteor.users.find(params);\n});\n\nMeteor.publish('usuariosCatalogo', () => {\n  return Roles.getUsersInRole('Maestro');\n});\n\nMeteor.publish('listaUsuarios', () => {\n  return Meteor.users.find({\"roles\" : \"Maestro\"});\n})\n\nMeteor.publish('listaCoordinadores', () => {\n  return Meteor.users.find({\"roles\" : \"Coordinador\"});\n})\n\nMeteor.publish('listaAdministradores', () => {\n  return Meteor.users.find({\"roles\" : \"Administrador\"});\n})\n\nMeteor.publish('listaAdministradoresPorUnidad', (params) => {\n  return Meteor.users.find(params)\n})\n\n\nMeteor.publish('listaMaestrosPorUnidad', (params) => {\n    return Meteor.users.find(params);\n})\n\n\nMeteor.publish(\"buscarUsuarios\",function(options) {\n  if(options != undefined) {\n          let selector =  {\n               \"username\" : { '$regex': '.*' + options.where.username\n          || '' + '.*', '$options': 'i' }\n          }\n          return Meteor.users.find(selector, options.options)   \n  }\n});\n\nMeteor.publish('listaCoordinadoresPorUnidad', (params) => {\n  return Meteor.users.find(params);\n});\n","Alumnos \t\t\t\t\t\t= new Mongo.Collection(\"alumnos\");\r\nAlumnos.allow({\r\n  insert: function () { return true; },\r\n  update: function () { return true; },\r\n  remove: function () { return true; }\r\n});","Departamentos \t\t\t\t\t\t= new Mongo.Collection(\"departamentos\");\nDepartamentos.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});","Libros \t\t\t\t\t\t= new Mongo.Collection(\"libros\");\r\nLibros.allow({\r\n  insert: function () { return true; },\r\n  update: function () { return true; },\r\n  remove: function () { return true; }\r\n});","Maestros = new Mongo.Collection(\"maestros\");\nMaestros.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});","Materias \t\t\t\t\t\t= new Mongo.Collection(\"materias\");\nMaterias.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});","PlanesEstudio = new Mongo.Collection(\"planesdeEstudio\");\nPlanesEstudio.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});","ProgramasEducativos \t\t\t\t\t\t= new Mongo.Collection(\"programasEducativos\");\nProgramasEducativos.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});","Unidades \t\t\t\t\t\t= new Mongo.Collection(\"unidades\");\nUnidades.allow({\n  insert: function () { return true; },\n  update: function () { return true; },\n  remove: function () { return true; }\n});"]}}]